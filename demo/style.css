/* style.css */

/* ============================================= */
/* --- Main App Layout & Vertical Stretching --- */
/* ============================================= */
/* These rules ensure that the main columns and their contents stretch 
   to fill the full height of the browser window, creating a more 
   app-like feel and preventing empty space on taller screens. */

#main_container {
    height: 100%; /* Allows child elements to use percentage-based heights. */
}

.stretch-height {
    height: 100%;
    display: flex; /* Enables flexbox layout for vertical stretching. */
    flex-direction: column; /* Stacks child elements vertically. */
}

/* Target the Gradio Tabs component directly within a stretched column. */
.stretch-height > .gradio-tabs {
    flex-grow: 1; /* Allows the tabs container to expand and fill available vertical space. */
    display: flex;
    flex-direction: column;
}

/* Target the content area within the tabs. */
.stretch-height > .gradio-tabs > .tab-content {
    flex-grow: 1; /* Makes the active tab's content area also expand. */
    display: flex;
}

/* Ensure that any plot inside a stretched container expands to fill the space. */
.stretch-height .gradio-plot {
    flex-grow: 1;
}

/* ======================================= */
/* --- General Component & Plot Resets --- */
/* ======================================= */
/* A collection of overrides to remove default Gradio and Plotly styling
   for a cleaner, more integrated appearance. */

/* Hide the default Plotly modebar (zoom, pan, etc.) for all charts. */
.modebar-container {
    display: none !important;
}

/* A utility class to create borderless components (rarely used). */
.no-border {
    border: none !important;
    box-shadow: none !important;
    background: none !important;
}

/* Remove the default border and shadow from Gradio's plot containers. */
.gradio-container .plot-container {
    border: none !important;
    box-shadow: none !important;
}

/* Example of a brittle, hardcoded style. Best to avoid if possible. */
#component-2 {
    background-color: gray !important;
}

/* Apply the borderless, shadowless, and transparent background style to all 
   specific plot containers used in the application for a uniform look. */
#cell_line_treemap_container,
#drug_composition_bar_container,
#cell_line_umap_container,
#drug_umap_container,
#mol_image_container,
#cell_line_ic50_comp_analysis_container, 
#cell_line_ic50_dist_analysis_container,
#drug_sim_dist_analysis_container,
#drug_ic50_scatter_analysis_container,
#external_drug_ic50_scatter_analysis_container {
    border: none !important;
    box-shadow: none !important;
    background: none !important;
}

/* This is a highly specific selector to hide the root label ("Cell Lines") 
   inside the treemap, as it's redundant. */
g.trace > .slice > .slicetext > text[data-unformatted="Cell Lines"] {
    display: none !important;
}

/* =========================================== */
/* --- "Train Data Overview" Info Panel --- */
/* =========================================== */
/* Styles for the row containing summary statistics and the "Load More" button. */

/* Use CSS Grid for a flexible 4-column layout. */
#info-panel-row {
    display: grid;
    /* 3 equal columns, and a 4th that's between 64px and 128px wide. */
    grid-template-columns: 1fr 1fr 1fr minmax(64px, 128px);
    gap: 15px;
}

/* Style the statistic buttons to look like static info boxes, not interactive buttons. */
.info-button {
    background: #FFFFFF !important;
    border: 1px solid #E0E0E0 !important;
    color: #4A4A4A !important;
    box-shadow: none !important;
    cursor: default !important; /* Remove the pointer cursor. */
    width: 100% !important;
}

/* Style the "Load More" button with a prominent color. */
#load-more-button {
    background: #f97316 !important; /* Orange color */
    color: #FFFFFF !important;   
    border: none !important;
    min-width: 0 !important;
    width: 128px !important; 
} 

#load-more-button:hover {
    background: #f97316 !important;
    opacity: 0.8 !important; /* Slightly fade on hover for feedback. */
}

/* ======================================= */
/* --- Plotly Legend Adjustments --- */
/* ======================================= */

/* This highly specific selector targets the legend of the drug composition bar chart.
   It moves the legend to the far right to prevent it from overlapping with chart content. */
#drug_composition_bar_container > div.js-plotly-plot > div > div > svg:nth-child(3) > g.infolayer > g.legend {
    transform: translateX(93%) !important;
}

/* Hide the scrollbar that can appear in long Plotly legends. */
.legend .scrollbar {
    display: none;
}

/* =========================================== */
/* --- Molecular Description Panel Styling --- */
/* =========================================== */
/* This complex selector resets a specific Gradio label's style to make it
   look like normal text instead of a bordered block title. */
#basic-props .styler #inchikey-label.block.field-label {
    --block-title-background-fill: transparent !important;
    --block-border-width: 0px !important;
    background: transparent !important;
    border: 0 !important;
    box-shadow: none !important;
    padding: 0 !important;
    margin: 0.5rem 0 0.25rem !important;
    font-weight: 600;
    font-size: 0.875rem;
}

/* ======================================================== */
/* --- IC50 Correlation Tab: Pagination Controls Styling --- */
/* ======================================================== */
/* Styles for the custom "Previous / Page X / Next" controls. */

/* Use flexbox to arrange the pagination controls in a row. */
#ic50_correlation_tab .pagination-row,
#external_ic50_correlation_tab .pagination-row {
    display: flex !important;
    justify-content: space-between !important; /* Pushes prev/next buttons to the edges. */
    align-items: center !important;
    margin-top: 10px !important;
}

/* Prevent the prev/next buttons from growing or shrinking. */
#ic50_correlation_tab #ic50_correlation_drug_prev_button,
#ic50_correlation_tab #ic50_correlation_drug_next_button,
#external_ic50_correlation_tab #external_ic50_correlation_drug_prev_button,
#external_ic50_correlation_tab #external_ic50_correlation_drug_next_button {
    flex-grow: 0; 
    flex-shrink: 0; 
}

/* Allow the page info text to expand and fill the middle space, centering it. */
#ic50_correlation_tab #drug_page_info,
#external_ic50_correlation_tab #external_drug_page_info {
    flex-grow: 1 !important;
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
}

/* A minor positional adjustment for the page info text. */
#ic50_correlation_tab #drug_page_info p, 
#external_ic50_correlation_tab #external_drug_page_info p {
    position: relative !important;
    left: -16px !important;
    font-size: 16px !important;
    font-weight: bold !important;
}

/* Reset pagination button styles to look like plain text links. */
#ic50_correlation_tab .pagination-row button,
#external_ic50_correlation_tab .pagination-row button {
    border: none !important;
    background: transparent !important;
    box-shadow: none !important;
    padding: 2px 0 !important;
    cursor: pointer;
    font-weight: bold;
    color: black !important;
    outline: none !important;
}

/* Add a hover effect for visual feedback. */
#ic50_correlation_tab .pagination-row button:hover,
#external_ic50_correlation_tab .pagination-row button:hover {
    color: darkgray !important;
}

/* Align button text and set width to fit content. */
#ic50_correlation_tab #ic50_correlation_drug_prev_button,
#external_ic50_correlation_tab #external_ic50_correlation_drug_prev_button {
    text-align: left !important;
    min-width: fit-content !important;
}

#ic50_correlation_tab #ic50_correlation_drug_next_button,
#external_ic50_correlation_tab #external_ic50_correlation_drug_next_button {
    text-align: right !important;
    min-width: fit-content !important;
}

/* Style for disabled pagination buttons (e.g., "Previous" on page 1). */
#ic50_correlation_tab .pagination-row button:disabled,
#external_ic50_correlation_tab .pagination-row button:disabled {
    color: lightgray !important;
    cursor: default; /* Remove the pointer on disabled state. */
}